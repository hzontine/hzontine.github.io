---
layout: post
title: Python-Flask
---


Currently, I am enrolled in CPSC 350, Applications of Databases. While the focus of the class is databases, we are also tasked with applying it to a web application. It requires a relatively simple combination of Python on the back-end and Flask on the front-end. For example, in the code below, the first line creates a server sided call, while the function in the second line will handle the call in Python. The route decorator is required before each function to tell Flask which URL it should be triggered.

{% highlight python %}

@app.route('/', methods=['GET', 'POST'])
def mainIndex():
  # Insert code here

{% endhighlight %}

For the purpose of handling the database connection and future queries, Psycopg2, a Python library that creates a connection to a PostgreSQL database, has to be imported like so:

{% highlight python %}

import psycopg2;
import psycopg2.extras;

{% endhighlight %}

Also, the Flask Class needs to be imported and an instance created for a singular module. In this case, we use __name__ because whether it starts as application or is imported as module, its name will be different ('__main__' versus the actual import '__name__'). This is essential because Flask needs to know where to look for your templates, static files, etc.

{% highlight python %}
from flask import Flask

app = Flask(__name__)
{% endhighlight %}

Next, we need to make a function that connects to our PostgreSQL database.

{% highlight python %}

def connectToDatabase():
 return psycopg2.connect('dbname=session user=hzontine password=password host=localhost')

{% endhighlight %}
 
Inside each function we wish to access the database, the following code must appear:

{% highlight python %}

conn = connectToDB()
cur = conn.cursor(cursor_factory=psycopg2.extras.DictCursor)

{% endhighlight %}



